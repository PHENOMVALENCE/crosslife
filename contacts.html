<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Contact Us - CrossLife Mission Network</title>
  <meta name="description" content="Contact CrossLife Mission Network. We welcome you to connect with us. Grace and Peace be multiplied to you in Jesus' Name.">
  <meta name="keywords" content="CrossLife, Contact, Prayer Request, Inquiry, Dar es Salaam, Tanzania">

  <!-- Favicons -->
  <link href="assets/img/logo.png" rel="icon">
  <link href="assets/img/logo.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">
</head>

<body class="index-page">

  <header id="header" class="header fixed-top">
    <div class="container-fluid container-xl position-relative">

      <div class="top-row d-flex align-items-center justify-content-between">
        <a href="index.html" class="logo d-flex align-items-center">
          <img src="assets/img/logo.png" alt="CrossLife Mission Network Logo">
          <h1 class="sitename">CrossLife Mission Network</h1>
        </a>

        <div class="d-flex align-items-center">
          <div class="search-toggle me-3">
            <button type="button" class="btn-search" data-bs-toggle="modal" data-bs-target="#searchModal" aria-label="Search">
              <i class="bi bi-search"></i>
            </button>
          </div>
          <div class="social-links">
            <a href="https://www.facebook.com/crosslife_tz" class="facebook" target="_blank" rel="noopener noreferrer"><i class="bi bi-facebook"></i></a>
            <a href="https://www.instagram.com/crosslife_tz" class="instagram" target="_blank" rel="noopener noreferrer"><i class="bi bi-instagram"></i></a>
            <a href="https://www.youtube.com/@CrossLifeTV" class="youtube" target="_blank" rel="noopener noreferrer"><i class="bi bi-youtube"></i></a>
          <a href="https://www.tiktok.com/@CrossLife" class="tiktok" target="_blank" rel="noopener noreferrer"><i class="bi bi-tiktok"></i></a>
          </div>
        </div>
      </div>

    </div>

    <div class="nav-wrap">
      <div class="container d-flex justify-content-center position-relative">
        <nav id="navmenu" class="navmenu">
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="index.html#about">About</a></li>
            <li><a href="index.html#features">Core Beliefs</a></li>
            <li><a href="leadersgip.php">Leadership</a></li>
            <li><a href="ministries.php">Ministries</a></li>
            <li><a href="sermons.html">Sermons</a></li>
            <li><a href="discipleship.html">Discipleship</a></li>
            <li><a href="events.php">Events</a></li>
            <li><a href="contacts.html" class="active">Contact</a></li>
            <li><a href="galley.html">Galley</a></li>
          </ul>
          <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
        </nav>
      </div>
    </div>

  </header>

  <main class="main">

    <!-- Page Header -->
    <section class="page-header section dark-background" style="background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('assets/img/_MG_5021.jpg') center/cover;">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h1 data-aos="fade-up">Contact Us</h1>
            <p data-aos="fade-up" data-aos-delay="100">We welcome you to connect with us. Grace and Peace be multiplied to you in Jesus' Name. Receive Life in abundance.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact section">
      <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="row align-items-stretch">
          <div class="col-lg-7 order-lg-1 order-2" data-aos="fade-right" data-aos-delay="200">
            <div class="contact-form-container">
              <div class="form-intro">
                <h2>Let's Start a Conversation</h2>
                <p>We'd love to hear from you. Whether you have questions, prayer requests, or want to learn more about CrossLife Mission Network, please reach out to us.</p>
              </div>

              <ul class="nav nav-tabs mb-3" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact-form-tab" type="button" role="tab">General Inquiry</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="prayer-tab" data-bs-toggle="tab" data-bs-target="#prayer-form-tab" type="button" role="tab">Prayer Request</button>
                </li>
              </ul>

              <div class="tab-content">
                <div class="tab-pane fade show active" id="contact-form-tab" role="tabpanel">
                  <form action="forms/contact.php" method="post" class="contact-form">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="form-field">
                          <input type="text" name="name" class="form-input" id="userName" placeholder="Your Name" required="">
                          <label for="userName" class="field-label">Name</label>
                        </div>
                      </div>

                      <div class="col-md-6">
                        <div class="form-field">
                          <input type="email" class="form-input" name="email" id="userEmail" placeholder="Your Email" required="">
                          <label for="userEmail" class="field-label">Email</label>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6">
                        <div class="form-field">
                          <input type="tel" class="form-input" name="phone" id="userPhone" placeholder="Your Phone">
                          <label for="userPhone" class="field-label">Phone</label>
                        </div>
                      </div>

                      <div class="col-md-6">
                        <div class="form-field">
                          <input type="text" class="form-input" name="subject" id="messageSubject" placeholder="Subject" required="">
                          <label for="messageSubject" class="field-label">Subject</label>
                        </div>
                      </div>
                    </div>

                    <div class="form-field message-field">
                      <textarea class="form-input message-input" name="message" id="userMessage" rows="5" placeholder="Share your message, prayer request, or question" required=""></textarea>
                      <label for="userMessage" class="field-label">Message</label>
                    </div>

                    <div class="my-3">
                      <div class="loading">Loading</div>
                      <div class="error-message"></div>
                      <div class="sent-message">Your message has been sent. Thank you!</div>
                    </div>

                    <button type="submit" class="send-button">
                      Send Message
                      <span class="button-arrow">→</span>
                    </button>
                  </form>
                </div>

                <div class="tab-pane fade" id="prayer-form-tab" role="tabpanel">
                  <form action="forms/prayer-request.php" method="post" class="contact-form">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="form-field">
                          <input type="text" name="name" class="form-input" id="prayerName" placeholder="Your Name (Optional)">
                          <label for="prayerName" class="field-label">Name (Optional)</label>
                        </div>
                      </div>

                      <div class="col-md-6">
                        <div class="form-field">
                          <input type="email" class="form-input" name="email" id="prayerEmail" placeholder="Your Email (Optional)">
                          <label for="prayerEmail" class="field-label">Email (Optional)</label>
                        </div>
                      </div>
                    </div>

                    <div class="form-field message-field">
                      <textarea class="form-input message-input" name="prayer_request" id="prayerRequest" rows="6" placeholder="Share your prayer request" required=""></textarea>
                      <label for="prayerRequest" class="field-label">Prayer Request *</label>
                    </div>

                    <div class="my-3">
                      <div class="loading">Loading</div>
                      <div class="error-message"></div>
                      <div class="sent-message">Thank you for your prayer request. We will be praying with you.</div>
                    </div>

                    <button type="submit" class="send-button">
                      Submit Prayer Request
                      <span class="button-arrow">→</span>
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-5 order-lg-2 order-1" data-aos="fade-left" data-aos-delay="300">
            <div class="contact-sidebar">
              <div class="contact-header">
                <h3>Get in Touch</h3>
                <p>We welcome you to connect with us. Grace and Peace be multiplied to you in Jesus' Name. Receive Life in abundance.</p>
              </div>

              <div class="contact-methods">
                <div class="contact-method" data-aos="fade-in" data-aos-delay="350">
                  <div class="contact-icon">
                    <i class="bi bi-geo-alt"></i>
                  </div>
                  <div class="contact-details">
                    <span class="method-label">Location</span>
                    <p>Dar es Salaam<br>Tanzania</p>
                  </div>
                </div>

                <div class="contact-method" data-aos="fade-in" data-aos-delay="400">
                  <div class="contact-icon">
                    <i class="bi bi-envelope"></i>
                  </div>
                  <div class="contact-details">
                    <span class="method-label">Email</span>
                    <p>karibu@crosslife.org<br>lenhard.kyamba@crosslife.org</p>
                  </div>
                </div>

                <div class="contact-method" data-aos="fade-in" data-aos-delay="450">
                  <div class="contact-icon">
                    <i class="bi bi-telephone"></i>
                  </div>
                  <div class="contact-details">
                    <span class="method-label">Phone</span>
                    <p>+255 (0)6 531 265 83<br>+255 (0)7 100 738 60</p>
                  </div>
                </div>

                <div class="contact-method" data-aos="fade-in" data-aos-delay="500">
                  <div class="contact-icon">
                    <i class="bi bi-person"></i>
                  </div>
                  <div class="contact-details">
                    <span class="method-label">Leadership</span>
                    <p>Senior Pastor<br>Lenhard Kyamba</p>
                  </div>
                </div>
              </div>

              <div class="connect-section" data-aos="fade-up" data-aos-delay="550">
                <span class="connect-label">Connect with us</span>
                <div class="social-links">
                  <a href="https://www.facebook.com/crosslife_tz" class="social-link" target="_blank" rel="noopener noreferrer">
                    <i class="bi bi-facebook"></i>
                  </a>
                  <a href="https://www.instagram.com/crosslife_tz" class="social-link" target="_blank" rel="noopener noreferrer">
                    <i class="bi bi-instagram"></i>
                  </a>
                  <a href="https://www.youtube.com/@CrossLifeTV" class="social-link" target="_blank" rel="noopener noreferrer">
                    <i class="bi bi-youtube"></i>
                  </a>
                  <a href="https://t.me/PastorLenhardKyamba" class="social-link" target="_blank" rel="noopener noreferrer">
                    <i class="bi bi-telegram"></i>
                  </a>
                  <a href="https://www.tiktok.com/@CrossLife_tz" class="social-link" target="_blank" rel="noopener noreferrer">
                    <i class="bi bi-tiktok"></i>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section><!-- /Contact Section -->

    <!-- Feedback Section -->
    <section id="feedback" class="feedback section">

      <!-- Section Title -->
      <div class="container section-title" data-aos="fade-up">
        <span class="subtitle">Feedback</span>
        <h2>Share Your Feedback</h2>
        <p>We value your input, concerns, and suggestions. Your feedback helps us serve you better.</p>
      </div><!-- End Section Title -->

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row justify-content-center">
          <div class="col-lg-8">
            <form action="forms/feedback.php" method="post" class="feedback-form">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-field">
                    <input type="text" name="name" class="form-input" id="feedbackName" placeholder="Your Name (Optional)">
                    <label for="feedbackName" class="field-label">Name (Optional - Anonymous submissions welcome)</label>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="form-field">
                    <input type="email" class="form-input" name="email" id="feedbackEmail" placeholder="Your Email (Optional)">
                    <label for="feedbackEmail" class="field-label">Email (Optional)</label>
                  </div>
                </div>
              </div>

              <div class="form-field">
                <select name="feedback_type" class="form-input" id="feedbackType">
                  <option value="other">Select Feedback Type</option>
                  <option value="praise">Praise/Testimony</option>
                  <option value="suggestion">Suggestion</option>
                  <option value="concern">Concern</option>
                  <option value="testimony">Testimony</option>
                  <option value="other">Other</option>
                </select>
                <label for="feedbackType" class="field-label">Feedback Type</label>
              </div>

              <div class="form-field message-field">
                <textarea class="form-input message-input" name="message" id="feedbackMessage" rows="6" placeholder="Share your feedback, concerns, or suggestions" required=""></textarea>
                <label for="feedbackMessage" class="field-label">Your Feedback *</label>
              </div>

                <div class="my-3">
                <div class="loading" style="display: none;">Loading</div>
                <div class="error-message" style="display: none;"></div>
                <div class="sent-message" style="display: none;">Thank you for your feedback! We appreciate your input.</div>
              </div>

              <button type="submit" class="send-button">
                Submit Feedback
                <span class="button-arrow">→</span>
              </button>
            </form>
          </div>
        </div>

      </div>

    </section><!-- /Feedback Section -->

  </main>

  <!-- Success Modals -->
  <!-- Contact Form Success Modal -->
  <div class="modal fade" id="contactSuccessModal" tabindex="-1" aria-labelledby="contactSuccessModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content success-modal-content">
        <div class="modal-body text-center p-5">
          <div class="success-icon mb-4">
            <i class="bi bi-check-circle-fill"></i>
          </div>
          <h3 class="mb-3">Message Sent Successfully!</h3>
          <p class="mb-4">Thank you for contacting us. We have received your message and will get back to you soon.</p>
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Prayer Request Success Modal -->
  <div class="modal fade" id="prayerSuccessModal" tabindex="-1" aria-labelledby="prayerSuccessModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content success-modal-content">
        <div class="modal-body text-center p-5">
          <div class="success-icon mb-4">
            <i class="bi bi-heart-fill"></i>
          </div>
          <h3 class="mb-3">Prayer Request Received!</h3>
          <p class="mb-4">Thank you for sharing your prayer request. We will be praying with you. May God bless you abundantly.</p>
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Feedback Success Modal -->
  <div class="modal fade" id="feedbackSuccessModal" tabindex="-1" aria-labelledby="feedbackSuccessModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content success-modal-content">
        <div class="modal-body text-center p-5">
          <div class="success-icon mb-4">
            <i class="bi bi-star-fill"></i>
          </div>
          <h3 class="mb-3">Feedback Submitted!</h3>
          <p class="mb-4">Thank you for your feedback. We truly appreciate your input and will use it to serve you better.</p>
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Search Modal -->
  <div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="searchModalLabel">Search</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="globalSearchForm" class="search-form">
            <div class="input-group input-group-lg">
              <input type="text" class="form-control" id="globalSearchInput" placeholder="Search sermons, events, ministries, discipleship programs..." autocomplete="off">
              <button class="btn btn-primary" type="submit">
                <i class="bi bi-search"></i>
              </button>
            </div>
          </form>
          <div id="searchResults" class="search-results mt-4" style="display: none;">
            <h6 class="mb-3">Search Results:</h6>
            <ul id="searchResultsList" class="list-unstyled">
              <!-- Search results will be populated here -->
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer id="footer" class="footer dark-background">

    <div class="container">
      <div class="row gy-5">

        <div class="col-lg-4">
          <div class="footer-content">
            <a href="index.html" class="logo d-flex align-items-center mb-4">
              <span class="sitename">CrossLife Mission Network</span>
            </a>
            <p class="mb-4">A non-denominational and inter-denominational Christian ministry in Dar es Salaam, Tanzania. We exist to manifest Sons of God who understand their identity in Christ and what Christ can accomplish through them.</p>

            <div class="newsletter-form">
              <h5>Stay Updated</h5>
              <form action="forms/newsletter.php" method="post" class="newsletter-form-submit">
                <div class="input-group">
                  <input type="email" name="email" class="form-control" placeholder="Enter your email" required="">
                  <button type="submit" class="btn-subscribe">
                    <i class="bi bi-send"></i>
                  </button>
                </div>
                <div class="loading" style="display: none;">Loading</div>
                <div class="error-message" style="display: none;"></div>
                <div class="sent-message" style="display: none;">You have been subscribed to the CrossLife newsletter. Thank you for staying connected!</div>
              </form>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-6">
          <div class="footer-links">
            <h4>Ministry</h4>
            <ul>
              <li><a href="index.html#about"><i class="bi bi-chevron-right"></i> About Us</a></li>
              <li><a href="index.html#features"><i class="bi bi-chevron-right"></i> Core Beliefs</a></li>
              <li><a href="contacts.html"><i class="bi bi-chevron-right"></i> Contact</a></li>
            </ul>
          </div>
        </div>

        <div class="col-lg-2 col-6">
          <div class="footer-links">
            <h4>Resources</h4>
            <ul>
              <li><a href="https://www.youtube.com/@CrossLifeTV" target="_blank" rel="noopener noreferrer"><i class="bi bi-chevron-right"></i> CrossLife TV</a></li>
              <li><a href="https://www.youtube.com/@PastorLenhardKyamba" target="_blank" rel="noopener noreferrer"><i class="bi bi-chevron-right"></i> Pastor Lenhard Kyamba</a></li>
            </ul>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="footer-contact">
            <h4>Get in Touch</h4>
            <div class="contact-item">
              <div class="contact-icon">
                <i class="bi bi-geo-alt"></i>
              </div>
              <div class="contact-info">
                <p>Dar es Salaam<br>Tanzania</p>
              </div>
            </div>

            <div class="contact-item">
              <div class="contact-icon">
                <i class="bi bi-telephone"></i>
              </div>
              <div class="contact-info">
                <p>+255 (0)6 531 265 83<br>+255 (0)7 100 738 60</p>
              </div>
            </div>

            <div class="contact-item">
              <div class="contact-icon">
                <i class="bi bi-envelope"></i>
              </div>
              <div class="contact-info">
                <p>karibu@crosslife.org<br>lenhard.kyamba@crosslife.org</p>
              </div>
            </div>

            <div class="social-links">
              <a href="https://www.facebook.com/crosslife_tz" target="_blank" rel="noopener noreferrer"><i class="bi bi-facebook"></i></a>
              <a href="https://www.instagram.com/crosslife_tz" target="_blank" rel="noopener noreferrer"><i class="bi bi-instagram"></i></a>
              <a href="https://www.youtube.com/@CrossLifeTV" target="_blank" rel="noopener noreferrer"><i class="bi bi-youtube"></i></a>
              <a href="https://t.me/PastorLenhardKyamba" target="_blank" rel="noopener noreferrer"><i class="bi bi-telegram"></i></a>
            </div>
          </div>
        </div>

      </div>
    </div>

    <div class="footer-bottom">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-6">
            <div class="copyright">
              <p>© <span>Copyright</span> <strong class="px-1 sitename">CrossLife Mission Network</strong> <span>All Rights Reserved</span></p>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="footer-bottom-links">
              <a href="admin/login.php"><i class="bi bi-shield-lock me-1"></i>Admin</a>
              <a href="#">Privacy Policy</a>
              <a href="#">Terms of Service</a>
              <a href="#">Cookie Policy</a>
            </div>
          </div>
        </div>
      </div>
    </div>

  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>

  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>

  <!-- Form Submission Handler -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Remove php-email-form class to prevent validate.js from interfering
      const formsToFix = document.querySelectorAll('#contact-form-tab form, #prayer-form-tab form, .feedback-form, .newsletter-form-submit');
      formsToFix.forEach(form => {
        if (form) {
          form.classList.remove('php-email-form');
        }
      });

      // Contact Form Handler
      const contactForm = document.querySelector('#contact-form-tab form');
      if (contactForm) {
        contactForm.addEventListener('submit', function(e) {
          e.preventDefault();
          e.stopPropagation();
          handleFormSubmission(contactForm, 'contact', '#contactSuccessModal');
        });
      }

      // Prayer Request Form Handler
      const prayerForm = document.querySelector('#prayer-form-tab form');
      if (prayerForm) {
        prayerForm.addEventListener('submit', function(e) {
          e.preventDefault();
          e.stopPropagation();
          handleFormSubmission(prayerForm, 'prayer', '#prayerSuccessModal');
        });
      }

      // Feedback Form Handler
      const feedbackForm = document.querySelector('.feedback-form');
      if (feedbackForm) {
        // Ensure feedback_type has a default value if empty
        const feedbackTypeSelect = feedbackForm.querySelector('#feedbackType');
        if (feedbackTypeSelect && !feedbackTypeSelect.value) {
          feedbackTypeSelect.value = 'other';
        }
        
        feedbackForm.addEventListener('submit', function(e) {
          e.preventDefault();
          e.stopPropagation();
          
          // Ensure feedback_type is set before submission
          if (feedbackTypeSelect && !feedbackTypeSelect.value) {
            feedbackTypeSelect.value = 'other';
          }
          
          handleFormSubmission(feedbackForm, 'feedback', '#feedbackSuccessModal');
        });
      }

      function handleFormSubmission(form, formType, modalId) {
        const formData = new FormData(form);
        const submitButton = form.querySelector('button[type="submit"]');
        const loadingDiv = form.querySelector('.loading');
        const errorDiv = form.querySelector('.error-message');
        const sentDiv = form.querySelector('.sent-message');
        
        // Ensure feedback_type is set for feedback forms
        if (formType === 'feedback') {
          const feedbackTypeSelect = form.querySelector('#feedbackType');
          if (feedbackTypeSelect && !feedbackTypeSelect.value) {
            formData.set('feedback_type', 'other');
          }
        }
        
        // Get form action URL
        let actionUrl = form.getAttribute('action');
        if (!actionUrl) {
          if (formType === 'prayer') {
            actionUrl = 'forms/prayer-request.php';
          } else if (formType === 'feedback') {
            actionUrl = 'forms/feedback.php';
          } else {
            actionUrl = 'forms/contact.php';
          }
        }

        // Show loading state
        submitButton.disabled = true;
        const originalButtonText = submitButton.innerHTML;
        submitButton.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Sending...';
        if (loadingDiv) loadingDiv.style.display = 'block';
        if (errorDiv) errorDiv.style.display = 'none';
        if (sentDiv) sentDiv.style.display = 'none';

        // Submit form via AJAX
        fetch(actionUrl, {
          method: 'POST',
          body: formData
        })
        .then(response => {
          // Check if response is ok
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          // Check content type
          const contentType = response.headers.get('content-type');
          if (!contentType || !contentType.includes('application/json')) {
            return response.text().then(text => {
              // Try to parse as JSON even if content-type is wrong
              try {
                const jsonData = JSON.parse(text);
                return jsonData;
              } catch (e) {
                throw new Error('Invalid response format');
              }
            });
          }
          return response.json();
        })
        .then(data => {
          // Hide loading
          if (loadingDiv) loadingDiv.style.display = 'none';
          
          // Check if data exists and has status
          if (!data || typeof data !== 'object') {
            throw new Error('Invalid response format');
          }
          
          if (data.status === 'success') {
            // Hide any error messages
            if (errorDiv) errorDiv.style.display = 'none';
            if (sentDiv) sentDiv.style.display = 'none';
            
            // Show success modal
            const modalElement = document.querySelector(modalId);
            if (modalElement) {
              const modal = new bootstrap.Modal(modalElement);
              modal.show();
            }
            
            // Reset form
            form.reset();
            
            // Reset feedback type to default if it's a feedback form
            if (formType === 'feedback') {
              const feedbackTypeSelect = form.querySelector('#feedbackType');
              if (feedbackTypeSelect) {
                feedbackTypeSelect.value = 'other';
              }
            }
            
            // Reset button
            submitButton.disabled = false;
            submitButton.innerHTML = originalButtonText;
          } else {
            // Show error - only if status is not success
            if (errorDiv) {
              errorDiv.textContent = data.message || 'An error occurred. Please try again.';
              errorDiv.style.display = 'block';
            }
            
            // Reset button
            submitButton.disabled = false;
            submitButton.innerHTML = originalButtonText;
          }
        })
        .catch(error => {
          console.error('Form submission error:', error);
          
          // Hide loading
          if (loadingDiv) loadingDiv.style.display = 'none';
          
          // Show user-friendly error message
          if (errorDiv) {
            // Check if error message contains JSON (which shouldn't happen)
            let errorMessage = error.message || 'Network error. Please check your connection and try again.';
            
            // If error message looks like JSON, provide a generic message
            if (errorMessage.includes('{') && errorMessage.includes('status')) {
              errorMessage = 'An error occurred while submitting. Please try again.';
            }
            
            errorDiv.textContent = errorMessage;
            errorDiv.style.display = 'block';
          }
          
          // Reset button
          submitButton.disabled = false;
          submitButton.innerHTML = originalButtonText;
        });
      }

      // Newsletter Form Handler
      const newsletterForm = document.querySelector('.newsletter-form-submit');
      if (newsletterForm) {
        newsletterForm.addEventListener('submit', function(e) {
          e.preventDefault();
          e.stopPropagation();
          handleNewsletterSubmission(newsletterForm);
        });
      }

      function handleNewsletterSubmission(form) {
        const formData = new FormData(form);
        const submitButton = form.querySelector('button[type="submit"]');
        const loadingDiv = form.querySelector('.loading');
        const errorDiv = form.querySelector('.error-message');
        const sentDiv = form.querySelector('.sent-message');
        
        // Show loading state
        submitButton.disabled = true;
        const originalButtonText = submitButton.innerHTML;
        submitButton.innerHTML = '<span class="spinner-border spinner-border-sm"></span>';
        if (loadingDiv) loadingDiv.style.display = 'block';
        if (errorDiv) errorDiv.style.display = 'none';
        if (sentDiv) sentDiv.style.display = 'none';

        // Submit form via AJAX
        fetch('forms/newsletter.php', {
          method: 'POST',
          body: formData
        })
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          const contentType = response.headers.get('content-type');
          if (!contentType || !contentType.includes('application/json')) {
            return response.text().then(text => {
              try {
                return JSON.parse(text);
              } catch (e) {
                throw new Error('Invalid response format');
              }
            });
          }
          return response.json();
        })
        .then(data => {
          if (loadingDiv) loadingDiv.style.display = 'none';
          
          if (data && data.status === 'success') {
            if (errorDiv) errorDiv.style.display = 'none';
            if (sentDiv) {
              sentDiv.textContent = data.message || 'Thank you for subscribing!';
              sentDiv.style.display = 'block';
            }
            form.reset();
          } else {
            if (errorDiv) {
              errorDiv.textContent = data.message || 'An error occurred. Please try again.';
              errorDiv.style.display = 'block';
            }
          }
          
          submitButton.disabled = false;
          submitButton.innerHTML = originalButtonText;
        })
        .catch(error => {
          console.error('Newsletter subscription error:', error);
          if (loadingDiv) loadingDiv.style.display = 'none';
          if (errorDiv) {
            errorDiv.textContent = 'Network error. Please check your connection and try again.';
            errorDiv.style.display = 'block';
          }
          submitButton.disabled = false;
          submitButton.innerHTML = originalButtonText;
        });
      }
    });
  </script>

</body>

</html>

